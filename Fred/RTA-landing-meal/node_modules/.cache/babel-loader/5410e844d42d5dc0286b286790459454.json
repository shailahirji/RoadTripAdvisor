{"ast":null,"code":"import _classCallCheck from \"/Users/shaila/Documents/GitHub/RoadTripAdvisor/Shaila/RTA-landing-meal/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/shaila/Documents/GitHub/RoadTripAdvisor/Shaila/RTA-landing-meal/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/shaila/Documents/GitHub/RoadTripAdvisor/Shaila/RTA-landing-meal/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/shaila/Documents/GitHub/RoadTripAdvisor/Shaila/RTA-landing-meal/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/shaila/Documents/GitHub/RoadTripAdvisor/Shaila/RTA-landing-meal/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/shaila/Documents/GitHub/RoadTripAdvisor/Shaila/RTA-landing-meal/src/components/Home.js\";\nimport React, { Component } from \"react\";\nimport { Form, Input } from \"reactstrap\";\nimport { Badge } from \"reactstrap\";\nimport { Calendar } from \"react-date-range\";\nimport MapContainer from \"./MapContainer.js\";\nimport { Stitch, AnonymousCredential, RemoteMongoClient } from \"mongodb-stitch-browser-sdk\";\nimport DateRangePicker from \"react-bootstrap-daterangepicker\";\nimport \"bootstrap-daterangepicker/daterangepicker.css\";\nimport { sendLocation } from \"./../actions\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport LocationSearchInput from \"./LocationSearchInput\";\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Home)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      from: \"\",\n      to: \"\",\n      redirect: false,\n      validOrigin: false,\n      validDestination: false,\n      db: null,\n      client: null\n    };\n\n    _this.displayRoadTripAdvisorOnLoad = function () {\n      //Anonymously log in and display the comments on load \n      _this.client.auth.loginWithCredential(new AnonymousCredential()).then(console.log(\"succefully connected to DB!\")).catch(console.error);\n    };\n\n    _this.handleLocations = function (location) {\n      if (location.target.id == \"from\") {\n        _this.setState({\n          from: location.target.value\n        });\n      } else {\n        _this.setState({\n          to: location.target.value\n        });\n      } // console.log('HEYY ',location.target.id)\n\n    };\n\n    _this.handleLocationSubmit = function () {\n      _this.props.dispatch(sendLocation(_this.state));\n\n      _this.setState({\n        redirect: true\n      });\n\n      console.log(\"The Locations are \", _this.state);\n    };\n\n    _this.handleDestination = function (address) {\n      _this.setState({\n        to: address\n      });\n    };\n\n    _this.handleOrigin = function (address) {\n      _this.setState({\n        from: address\n      });\n    };\n\n    _this.handleSelectOrigin = function (address) {\n      if (_this.validateAddress(address)) {\n        _this.handleOrigin(address);\n\n        _this.setState({\n          validOrigin: true\n        });\n      } else {\n        console.log(\"HELAS ORIGIN\");\n\n        _this.setState({\n          validOrigin: false\n        });\n      }\n    };\n\n    _this.handleSelectDestination = function (address) {\n      if (_this.validateAddress(address)) {\n        _this.handleDestination(address);\n\n        _this.setState({\n          validDestination: true\n        });\n      } else {\n        console.log(\"HELAS\");\n\n        _this.setState({\n          validDestination: false\n        });\n      }\n    };\n\n    _this.validateAddress = function (address) {\n      var addressCopy = address.split(\",\");\n\n      if (addressCopy[addressCopy.length - 1].trim() !== \"USA\") {\n        return false;\n      } else {\n        return true;\n      }\n    };\n\n    _this.renderRedirect = function () {\n      if (_this.state.redirect) {\n        return React.createElement(Redirect, {\n          to: {\n            pathname: \"/mealpref\",\n            state: _this.state\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //initialize the App Client \n      this.setState({\n        client: Stitch.initializeDefaultAppClient(\"road-trip-advisor-iiwad\")\n      }); //get a MongoDB Service Client \n      //this is used for logging in and communitcating with stitch\n\n      var mongodb = this.client.getServiceClient(RemoteMongoClient.factory, \"mongodb-atlas\"); //get reference to RTA databse \n\n      this.setState({\n        db: mongodb.db(\"RoadTripAdvisor\")\n      });\n      this.displayRoadTripAdvisorOnLoad();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isEnabled = this.state.validOrigin && this.state.validDestination;\n      console.log(\"HEHEH \", isEnabled);\n      return React.createElement(\"div\", {\n        class: \"here otherBack\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"landingpage-style\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"roadTripAdvisor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Road Trip Advisor\"), React.createElement(\"p\", {\n        className: \"roadTripAdvisor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \" \", \"Share Road Trip Advisor with your friends!\")), React.createElement(\"div\", {\n        class: \"container my-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"row text-center pb-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        class: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"card \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(LocationSearchInput, {\n        handleSelect: this.handleSelectOrigin,\n        handleLocation: this.handleOrigin,\n        locations: this.state.from,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(LocationSearchInput, {\n        handleSelect: this.handleSelectDestination,\n        handleLocation: this.handleDestination,\n        locations: this.state.to,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"col-md-3 \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(DateRangePicker, {\n        onApply: this.handleApply,\n        isInvalidDate: this.checkInvalidDates,\n        opens: \"left\",\n        containerStyles: {\n          display: \"block\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        ref: this.dateRef,\n        id: \"dates\",\n        type: \"text\",\n        className: \"form-control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        class: \"col-md-3 \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"time\",\n        placeholder: \"Return\",\n        className: \"form-control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        class: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"col-md-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, this.renderRedirect(), React.createElement(\"button\", {\n        onClick: this.handleLocationSubmit,\n        disabled: !isEnabled,\n        type: \"button\",\n        class: \"btn btn-warning  pl-5 pr-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \" \", \"Search\", \" \"))))))))));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default connect()(Home);","map":{"version":3,"sources":["/Users/shaila/Documents/GitHub/RoadTripAdvisor/Shaila/RTA-landing-meal/src/components/Home.js"],"names":["React","Component","Form","Input","Badge","Calendar","MapContainer","Stitch","AnonymousCredential","RemoteMongoClient","DateRangePicker","sendLocation","connect","Redirect","LocationSearchInput","Home","state","from","to","redirect","validOrigin","validDestination","db","client","displayRoadTripAdvisorOnLoad","auth","loginWithCredential","then","console","log","catch","error","handleLocations","location","target","id","setState","value","handleLocationSubmit","props","dispatch","handleDestination","address","handleOrigin","handleSelectOrigin","validateAddress","handleSelectDestination","addressCopy","split","length","trim","renderRedirect","pathname","initializeDefaultAppClient","mongodb","getServiceClient","factory","isEnabled","handleApply","checkInvalidDates","display","dateRef"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Form, Input } from \"reactstrap\";\nimport { Badge } from \"reactstrap\";\nimport { Calendar } from \"react-date-range\";\nimport MapContainer from \"./MapContainer.js\";\nimport {Stitch, AnonymousCredential,RemoteMongoClient} from \"mongodb-stitch-browser-sdk\";\nimport DateRangePicker from \"react-bootstrap-daterangepicker\";\nimport \"bootstrap-daterangepicker/daterangepicker.css\";\nimport { sendLocation } from \"./../actions\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport LocationSearchInput from \"./LocationSearchInput\";\n\nclass Home extends Component {\n  state = {\n    from: \"\",\n    to: \"\",\n    redirect: false,\n    validOrigin: false,\n    validDestination: false,\n    db:null, \n    client:null\n  };\n\n  componentDidMount(){\n    //initialize the App Client \n    this.setState({client:Stitch.initializeDefaultAppClient(\"road-trip-advisor-iiwad\")});\n  \n    //get a MongoDB Service Client \n    //this is used for logging in and communitcating with stitch\n    const mongodb=this.client.getServiceClient(RemoteMongoClient.factory,\"mongodb-atlas\");\n\n    //get reference to RTA databse \n    this.setState({db:mongodb.db(\"RoadTripAdvisor\")});\n    this.displayRoadTripAdvisorOnLoad();\n  }\n\n  displayRoadTripAdvisorOnLoad= ()=>{\n    //Anonymously log in and display the comments on load \n    this.client.auth.loginWithCredential(new AnonymousCredential()).then(console.log(\"succefully connected to DB!\")).catch(console.error);\n  }\n  handleLocations = location => {\n    if (location.target.id == \"from\") {\n      this.setState({ from: location.target.value });\n    } else {\n      this.setState({ to: location.target.value });\n    }\n    // console.log('HEYY ',location.target.id)\n  };\n\n  handleLocationSubmit = () => {\n    this.props.dispatch(sendLocation(this.state));\n    this.setState({ redirect: true });\n    console.log(\"The Locations are \", this.state);\n  };\n\n  handleDestination = address => {\n    this.setState({ to: address });\n  };\n  handleOrigin = address => {\n    this.setState({ from: address });\n  };\n\n  handleSelectOrigin = address => {\n    if (this.validateAddress(address)) {\n      this.handleOrigin(address);\n      this.setState({ validOrigin: true });\n    } else {\n      console.log(\"HELAS ORIGIN\");\n      this.setState({ validOrigin: false });\n    }\n  };\n  handleSelectDestination = address => {\n    if (this.validateAddress(address)) {\n      this.handleDestination(address);\n      this.setState({ validDestination: true });\n    } else {\n      console.log(\"HELAS\");\n      this.setState({ validDestination: false });\n    }\n  };\n\n  validateAddress = address => {\n    const addressCopy = address.split(\",\");\n    if (addressCopy[addressCopy.length - 1].trim() !== \"USA\") {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  renderRedirect = () => {\n    if (this.state.redirect) {\n      return <Redirect to={{ pathname: \"/mealpref\", state: this.state }} />;\n    }\n  };\n\n  render() {\n    const isEnabled = this.state.validOrigin && this.state.validDestination;\n    console.log(\"HEHEH \", isEnabled);\n    return (\n      <div class=\"here otherBack\">\n        <div className=\"text-center\">\n          <div className=\"landingpage-style\">\n            <h1 className=\"roadTripAdvisor\">Road Trip Advisor</h1>\n            <p className=\"roadTripAdvisor\">\n              {\" \"}\n              Share Road Trip Advisor with your friends!\n            </p>\n          </div>\n          <div class=\"container my-1\">\n            <div class=\"row text-center pb-1\" />\n            <div class=\"row\">\n              <div class=\"col-md-12\">\n                <div class=\"card \">\n                  <div class=\"card-body\">\n                    <div class=\"row\">\n                      <div class=\"col-md-3\">\n                        <div class=\"form-group \">\n                          {/* <input type=\"Location\" onChange={(event) => this.handleLocations(event)} class=\"form-control\" id=\"from\" placeholder=\"Starting From\" /> */}\n                          <LocationSearchInput\n                            handleSelect={this.handleSelectOrigin}\n                            handleLocation={this.handleOrigin}\n                            locations={this.state.from}\n                          />\n                        </div>\n                      </div>\n\n                      <div class=\"col-md-3\">\n                        <div class=\"form-group \">\n                          {/*<input type=\"Destination\" onChange={(event) => this.handleLocations(event)} class=\"form-control\" id=\"to\" placeholder=\"Destination\" /> */}\n                          <LocationSearchInput\n                            handleSelect={this.handleSelectDestination}\n                            handleLocation={this.handleDestination}\n                            locations={this.state.to}\n                          />\n                        </div>\n                      </div>\n\n                      <div class=\"col-md-3 \">\n                        <div class=\"form-group \">\n                          <DateRangePicker\n                            onApply={this.handleApply}\n                            isInvalidDate={this.checkInvalidDates}\n                            opens=\"left\"\n                            containerStyles={{ display: \"block\" }}\n                          >\n                            <input\n                              ref={this.dateRef}\n                              id=\"dates\"\n                              type=\"text\"\n                              className=\"form-control\"\n                            />\n                          </DateRangePicker>\n                        </div>\n                      </div>\n\n                      <div class=\"col-md-3 \">\n                        <div class=\"form-group \">\n                          <input\n                            type=\"time\"\n                            placeholder=\"Return\"\n                            className=\"form-control\"\n                          />\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                      <div class=\"col-md-9\">\n                        <div class=\"form-group \" />\n                      </div>\n\n                      <div class=\"col-md-3\">\n                        {this.renderRedirect()}\n                        <button\n                          onClick={this.handleLocationSubmit}\n                          disabled={!isEnabled}\n                          type=\"button\"\n                          class=\"btn btn-warning  pl-5 pr-5\"\n                        >\n                          {\" \"}\n                          Search{\" \"}\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect()(Home);\n"]},"metadata":{},"sourceType":"module"}