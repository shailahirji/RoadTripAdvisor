{"ast":null,"code":"import _classCallCheck from \"/Users/shaila/mealApp/meal-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/shaila/mealApp/meal-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/shaila/mealApp/meal-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/shaila/mealApp/meal-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/shaila/mealApp/meal-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _regeneratorRuntime from \"/Users/shaila/mealApp/meal-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/shaila/mealApp/meal-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/shaila/mealApp/meal-app/src/MealMap.js\",\n    _this = this;\n\n// /*global google*/\n// import React from \"react\"\n// import { compose, withProps, withHandlers, withState,withStateHandlers,lifecycle } from \"recompose\"\n// import { withScriptjs, withGoogleMap, GoogleMap,Polyline, Marker , InfoWindow,DirectionsRenderer } from \"react-google-maps\"\n// const MyMapComponent = compose(\n//     withProps(\n//         {\n//         googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyD8kEdQYnlfJaGYD70GNqtxzf7oet_3wwY&libraries=places,geometry\",\n//         loadingElement: <div style={{ height: '100vh' }} />,\n//         containerElement: <div style={{height: '100vh' }} />,\n//         mapElement: <div style={{ position:\"relative\",\n//         width: \"50%\",\n//         height: 382,\n//         WebkitFilter: \"drop-shadow(0px 0px 5px #666)\",\n//         marginLeft:491,\n//         marginTop:-411.9 }} />,\n//     }),\n//     withScriptjs,\n//     withGoogleMap,\n//     lifecycle({\n//         componentDidMount() { \n//           const DirectionsService = new google.maps.DirectionsService();\n//           DirectionsService.route({\n//             origin: new google.maps.LatLng(47.6769683,-122.0284808),\n//             destination: new google.maps.LatLng( 49.2827, -123.1207 ),\n//             travelMode: google.maps.TravelMode.DRIVING,\n//           }, (result, status) => {\n//             if (status === google.maps.DirectionsStatus.OK) {\n//                 console.log(result)\n// this.setState({\n//                 directions: {...result},\n//                 markers: true\n//               })\n//             } else {\n//               console.error(`error fetching directions ${result}`);\n//             }\n//           });\n//         }\n//       }),\n//     withState('places', 'updatePlaces','','searchCriteria','radius','currLat','currLng'),\n//     withStateHandlers(()=>({\n//         isOpen:false,\n//         markerIndex:0,\n//         currentLatLng:{\n//             lat:47.6769683,lng:-90.6769683\n//         }\n//     }),{\n//         onToggleOpen:({isOpen})=>(index)=>({\n//             isOpen:!isOpen,\n//             markerIndex:index\n//         })\n//     },\n//     ),\n//     withHandlers(() => {//props =>\n//         const refs = {\n//             map: undefined,\n//         }\n//         return {\n//             onMapMounted: () => ref => {\n//                 refs.map = ref\n//             },\n//             fetchPlaces: ({ updatePlaces, searchCriteria, radius ,price , review ,defaultCenter }) => {\n//                 const bounds = refs.map.getBounds();\n//                 //var typeSearchCriteria=searchCriteria;\n//                 var maxPrice=price\n//                 var searchRating=review\n//                 const service = new google.maps.places.PlacesService(refs.map.context.__SECRET_MAP_DO_NOT_USE_OR_YOU_WILL_BE_FIRED);\n//                 var request = {\n//                     location:defaultCenter,//location:(new google.maps.LatLng(47.6769683,-122.0284808)),or {lat:47.6769683,lng:-122.0284808}\n//                     bounds:bounds,\n//                     radius: radius,\n//                     type:searchCriteria,\n//                     openNow:true,\n//                     maxPriceLevel:maxPrice,\n//                     fields:['photos', 'formatted_address', 'name', 'rating', 'opening_hours', 'geometry']\n//                 };\n//                 service.nearbySearch(request, (results, status) => {\n//                     if (status === google.maps.places.PlacesServiceStatus.OK) {\n//                         //console.log(results);\n//                         console.log(\"Radius inside withhandlers \"+radius);\n//                         console.log(\"Reviews inside withhandlers \"+review);\n//                         updatePlaces(results);\n//                     }\n//                 })\n//             },\n//             currentLoc: ({currLat,currLng})=>{\n//                 if(navigator.geolocation){\n//                     navigator.geolocation.getCurrentPosition(\n//                         position=>{\n//                                currLat=position.coords.latitude\n//                                currLng=position.coords.longitude\n//                             })\n//                          console.log()\n//                         }\n//             }\n//         }\n//     }),\n// )((props) => {\n//   console.log(\"Radius \"+props.radius)\n//     var target=new google.maps.LatLng(47.6769683,-122.0284808);\n//     if(props.defaultCenter !== undefined){\n//         target=props.defaultCenter\n//     }\n//     var option=[]; //new array to store results based on search criteria\n//     if(props.places){\n//         props.places.map((place,i)=>\n//             //console.log({ lat: place.geometry.location.lat(), lng: place.geometry.location.lng()})\n//             {if(google.maps.geometry.spherical.computeDistanceBetween(target,new google.maps.LatLng(place.geometry.location.lat(),place.geometry.location.lng()))<props.radius){\n//                 option.push(place);\n//             }\n//             if(place.price_level<=props.price){\n//                 console.log(\"price match\")\n//                 option.push(place)\n//             }\n//             if(place.types.length !== 0 && place.types.includes(props.searchCriteria)){\n//                 console.log(\"type match \"+props.searchCriteria)\n//                 option.push(place)\n//             }\n//             if((place.rating)<=props.review){\n//                 console.log('rating match '+place.rating+\" : \"+props.review)\n//                 option.push(place)\n//             }\n//         }\n//         )\n//     }\n//     console.log(option);\n//     // if(navigator.geolocation){\n//     //     navigator.geolocation.getCurrentPosition(\n//     //         position=>{\n//     //                 props.currentLatLng.lat=position.coords.latitude\n//     //                 props.currentLatLng.lng=position.coords.longitude\n//     //             })\n//     //         }\n//         //console.log(props.currLat);\n//         const pathCoordinates = [\n//             {lat:47.6769683,lng:-122.0284808},\n//             { lat: 49.2827, lng: -123.1207 }\n//         ];\n//     return (\n//         <GoogleMap\n//             onTilesLoaded={props.fetchPlaces}\n//             ref={props.onMapMounted}\n//             onClick={props.fetchPlaces}\n//             defaultZoom={10}\n//                     defaultCenter={{lat:47.6769683,lng:-122.0284808}}\n//         >\n//             {option && option.map((place, i) =>                \n//                 <Marker key={i} position={{ lat: place.geometry.location.lat(), lng: place.geometry.location.lng() }} \n//                 onClick ={()=> {props.onToggleOpen(i)}} >\n//                 {props.isOpen && props.markerIndex=== i &&\n//                 <InfoWindow onCloseClick={props.onToggleOpen}>\n//                     <div>{place.name}</div>\n//                 </InfoWindow>\n//                 }\n//                 </Marker>\n//             )}\n//                   {/*for creating path with the updated coordinates*/}\n//             {/* <Polyline\n//                 path={pathCoordinates}\n//                 geodesic={true}\n//                 options={{\n//                     strokeColor: \"#ff2527\",\n//                     strokeOpacity: 0.75,\n//                     strokeWeight: 2,\n//                     icons: [\n//                         {\n//                             offset: \"0\",\n//                             repeat: \"20px\"\n//                         }\n//                     ]\n//                 }}\n//             />\n//              {props.directions && <DirectionsRenderer directions={props.directions} suppressMarkers={props.markers}/>} */}\n//         </GoogleMap>\n//     )\n// })\n// export default class MealMap extends React.Component {\n//     render() {\n//         var searchCriteria=this.props.search;\n//         var radius=this.props.radius;\n//         var price=this.props.price;\n//         var ratings=this.props.reviews;\n//         if(searchCriteria.length !== 0 || radius!== 0 || price !==0 || ratings!==0){\n//             console.log(searchCriteria+\" \"+ radius +\" \" +price+\" \"+ratings)\n//         searchCriteria.map(select=> {\n//             console.log(searchCriteria+\" \"+ radius +\" \" +price+\" \"+ratings)\n//             return(\n//               searchCriteria=select.label\n//             )\n//           })\n//           return (\n//             <MyMapComponent searchCriteria={searchCriteria} \n//                 price={price*1}\n//                 review={ratings}\n//                 radius={radius*1609} //converting into meters\n//             />\n//         )\n//           }\n//         // }else{\n//         //     console.log(searchCriteria+\" \"+ radius +\" \" +price+\" \"+ratings)\n//         return (\n//             <MyMapComponent searchCriteria='' \n//                 price=\"any\"\n//                 review=\"any\"\n//                 radius='0'\n//             />\n//         )\n//         // }\n//     }\n// }\n\n/*global google*/\nimport React from \"react\";\nimport { compose, withProps, withHandlers, withState, withStateHandlers } from \"recompose\";\nimport { withScriptjs, withGoogleMap, GoogleMap, Marker, InfoWindow } from \"react-google-maps\";\nvar h = [];\nvar MyMapComponent = compose(withProps({\n  googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyD8kEdQYnlfJaGYD70GNqtxzf7oet_3wwY&libraries=places,geometry\",\n  loadingElement: React.createElement(\"div\", {\n    style: {\n      height: '100vh'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255\n    },\n    __self: this\n  }),\n  containerElement: React.createElement(\"div\", {\n    style: {\n      height: '100vh'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256\n    },\n    __self: this\n  }),\n  mapElement: React.createElement(\"div\", {\n    style: {\n      position: \"relative\",\n      width: \"50%\",\n      height: 382,\n      WebkitFilter: \"drop-shadow(0px 0px 5px #666)\",\n      marginLeft: 491,\n      marginTop: -520.9\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257\n    },\n    __self: this\n  })\n}), withScriptjs, withGoogleMap, withState('places', 'updatePlaces', '', 'searchCriteria', 'radius', 'currLat', 'currLng'), withStateHandlers(function () {\n  return {\n    isOpen: false,\n    markerIndex: 0,\n    currentLatLng: {\n      lat: 47.6769683,\n      lng: -90.6769683\n    }\n  };\n}, {\n  onToggleOpen: function onToggleOpen(_ref) {\n    var isOpen = _ref.isOpen;\n    return function (index) {\n      return {\n        isOpen: !isOpen,\n        markerIndex: index\n      };\n    };\n  }\n}), withHandlers(function () {\n  var refs = {\n    map: undefined,\n    array: []\n  };\n  return {\n    onMapMounted: function onMapMounted() {\n      return function (ref) {\n        refs.map = ref;\n      };\n    },\n    fetchPlaces: function () {\n      var _fetchPlaces = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref2) {\n        var updatePlaces, searchCriteria, radius, price, review, defaultCenter, bounds, maxPrice, searchRating, service, x, output, request, shal, j;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                updatePlaces = _ref2.updatePlaces, searchCriteria = _ref2.searchCriteria, radius = _ref2.radius, price = _ref2.price, review = _ref2.review, defaultCenter = _ref2.defaultCenter;\n                bounds = refs.map.getBounds();\n                refs.array = searchCriteria;\n                console.log(refs.array.length); //var typeSearchCriteria=searchCriteria;\n\n                maxPrice = price;\n                searchRating = review;\n                service = new google.maps.places.PlacesService(refs.map.context.__SECRET_MAP_DO_NOT_USE_OR_YOU_WILL_BE_FIRED);\n                output = [];\n                x = 0;\n\n              case 9:\n                if (!(x < refs.array.length)) {\n                  _context.next = 19;\n                  break;\n                }\n\n                //console.log(refs.array[x])\n                request = {\n                  location: defaultCenter,\n                  //location:(new google.maps.LatLng(47.6769683,-122.0284808)),or {lat:47.6769683,lng:-122.0284808}\n                  bounds: bounds,\n                  radius: radius,\n                  type: refs.array[x],\n                  openNow: true,\n                  maxPriceLevel: maxPrice,\n                  fields: ['photos', 'formatted_address', 'name', 'rating', 'opening_hours', 'geometry']\n                };\n                shal = \"@ @ # $ \";\n                console.log(\"we are printing this \" + _this);\n                _context.next = 15;\n                return service.nearbySearch(request, function (results, status) {\n                  return new Promise(function (reject, resolve) {\n                    if (status === google.maps.places.PlacesServiceStatus.OK) {\n                      var x;\n\n                      for (x = 0; x < results.length; x++) {\n                        output.push(results[x]);\n                      }\n\n                      resolve(output); //that.setState({output})\n\n                      console.log(output); // console.log(\"Radius inside withhandlers \"+radius);\n                      // console.log(\"Reviews inside withhandlers \"+review);\n                      //updatePlaces(results);    \n                    } else {\n                      reject();\n                    }\n                  });\n                });\n\n              case 15:\n                console.log(output);\n\n              case 16:\n                x++;\n                _context.next = 9;\n                break;\n\n              case 19:\n                if (h.length > 0) {\n                  //console.log(\"HERE!!!!!!\"+ output.length);\n                  for (j = 0; j < h.length; j++) {\n                    console.log(h[j]);\n                  } // updatePlaces(output);\n\n                }\n\n                updatePlaces(h); // console.log(output);\n\n              case 21:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function fetchPlaces(_x) {\n        return _fetchPlaces.apply(this, arguments);\n      };\n    }(),\n    currentLoc: function currentLoc(_ref3) {\n      var currLat = _ref3.currLat,\n          currLng = _ref3.currLng;\n\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n          currLat = position.coords.latitude;\n          currLng = position.coords.longitude;\n        });\n        console.log();\n      }\n    }\n  };\n}))(function (props) {\n  //console.log(\"Radius \"+ props.radius)\n  if (props.places != null) //console.log(\"helloo\"+props.places)\n    var target = new google.maps.LatLng(47.6769683, -122.0284808);\n\n  if (props.defaultCenter !== undefined) {\n    target = props.defaultCenter;\n  }\n\n  var option = []; //new array to store results based on search criteria\n\n  if (props.places) {\n    console.log(\"here####\"); // props.places.map((place,i)=>\n    //     {\n    //     console.log({ lat: place.geometry.location.lat(), lng: place.geometry.location.lng()})\n    //     if(google.maps.geometry.spherical.computeDistanceBetween(target,new google.maps.LatLng(place.geometry.location.lat(),place.geometry.location.lng()))<props.radius){\n    //         option.push(place);\n    //     }\n    //     if(place.price_level<=props.price){\n    //         option.push(place)\n    //     }\n    //     console.log('stuck here')\n    //     if(place.types.length !== 0 && place.types.includes(props.searchCriteria)){\n    //         console.log(\"here \"+props.searchCriteria)\n    //         option.push(place)\n    //     }\n    // }\n    // )\n  } // var places_index;\n  // for(places_index=0;places_index<props.places.length;places_index++){\n  //     var results=props.places[places_index]\n  //     console.log(results)\n  // }\n\n\n  console.log(option); // if(navigator.geolocation){\n  //     navigator.geolocation.getCurrentPosition(\n  //         position=>{\n  //                 props.currentLatLng.lat=position.coords.latitude\n  //                 props.currentLatLng.lng=position.coords.longitude\n  //             })\n  //         }\n  //console.log(props.currLat);\n\n  return React.createElement(GoogleMap, {\n    onTilesLoaded: props.fetchPlaces,\n    ref: props.onMapMounted,\n    onClick: props.fetchPlaces,\n    defaultZoom: 10,\n    defaultCenter: {\n      lat: 47.6769683,\n      lng: -122.0284808\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422\n    },\n    __self: this\n  }, option && option.map(function (place, i) {\n    return React.createElement(Marker, {\n      key: i,\n      position: {\n        lat: place.geometry.location.lat(),\n        lng: place.geometry.location.lng()\n      },\n      onClick: function onClick() {\n        props.onToggleOpen(i);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430\n      },\n      __self: this\n    }, props.isOpen && props.markerIndex === i && React.createElement(InfoWindow, {\n      onCloseClick: props.onToggleOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434\n      },\n      __self: this\n    }, place.name)));\n  }));\n});\n\nvar MealMap =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MealMap, _React$Component);\n\n  function MealMap() {\n    _classCallCheck(this, MealMap);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MealMap).apply(this, arguments));\n  }\n\n  _createClass(MealMap, [{\n    key: \"render\",\n    value: function render() {\n      var searchCriteria = this.props.search;\n      var radius = this.props.radius;\n      var price = this.props.price;\n      var ratings = this.props.reviews;\n      var types = [];\n\n      if (searchCriteria.length !== 0 || radius !== 0 || price !== 0) {\n        console.log(searchCriteria + \" \" + radius + \" \" + price + \" \" + ratings); // searchCriteria.map(select=> {\n        //     console.log(searchCriteria+\" \"+ radius +\" \" +price+\" \"+ratings)\n        //     return(\n        //       searchCriteria=select.label\n        //     )\n        //   })\n\n        searchCriteria.map(function (select) {\n          types.push(select.label);\n        });\n        return React.createElement(MyMapComponent, {\n          searchCriteria: types,\n          price: price * 1,\n          review: ratings,\n          radius: radius * 1609 //converting into meters\n          ,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 472\n          },\n          __self: this\n        });\n      } // }else{\n      //     console.log(searchCriteria+\" \"+ radius +\" \" +price+\" \"+ratings)\n\n\n      return (//to prevent from crashing\n        React.createElement(MyMapComponent, {\n          searchCriteria: \"\",\n          price: \"any\",\n          review: \"any\",\n          radius: \"0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 482\n          },\n          __self: this\n        })\n      ); // }\n    }\n  }]);\n\n  return MealMap;\n}(React.Component);\n\nexport { MealMap as default };","map":{"version":3,"sources":["/Users/shaila/mealApp/meal-app/src/MealMap.js"],"names":["React","compose","withProps","withHandlers","withState","withStateHandlers","withScriptjs","withGoogleMap","GoogleMap","Marker","InfoWindow","h","MyMapComponent","googleMapURL","loadingElement","height","containerElement","mapElement","position","width","WebkitFilter","marginLeft","marginTop","isOpen","markerIndex","currentLatLng","lat","lng","onToggleOpen","index","refs","map","undefined","array","onMapMounted","ref","fetchPlaces","updatePlaces","searchCriteria","radius","price","review","defaultCenter","bounds","getBounds","console","log","length","maxPrice","searchRating","service","google","maps","places","PlacesService","context","__SECRET_MAP_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","output","x","request","location","type","openNow","maxPriceLevel","fields","shal","nearbySearch","results","status","Promise","reject","resolve","PlacesServiceStatus","OK","push","j","currentLoc","currLat","currLng","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","props","target","LatLng","option","place","i","geometry","name","MealMap","search","ratings","reviews","types","select","label","Component"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AAGA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AAEA;;AAEA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,EAAkBC,SAAlB,EAA6BC,YAA7B,EAA2CC,SAA3C,EAAqDC,iBAArD,QAA8E,WAA9E;AACA,SAASC,YAAT,EAAuBC,a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","sourcesContent":["// /*global google*/\n// import React from \"react\"\n// import { compose, withProps, withHandlers, withState,withStateHandlers,lifecycle } from \"recompose\"\n// import { withScriptjs, withGoogleMap, GoogleMap,Polyline, Marker , InfoWindow,DirectionsRenderer } from \"react-google-maps\"\n\n// const MyMapComponent = compose(\n\n//     withProps(\n//         {\n//         googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyD8kEdQYnlfJaGYD70GNqtxzf7oet_3wwY&libraries=places,geometry\",\n//         loadingElement: <div style={{ height: '100vh' }} />,\n//         containerElement: <div style={{height: '100vh' }} />,\n//         mapElement: <div style={{ position:\"relative\",\n//         width: \"50%\",\n//         height: 382,\n//         WebkitFilter: \"drop-shadow(0px 0px 5px #666)\",\n//         marginLeft:491,\n//         marginTop:-411.9 }} />,\n//     }),\n//     withScriptjs,\n//     withGoogleMap,\n//     lifecycle({\n//         componentDidMount() { \n//           const DirectionsService = new google.maps.DirectionsService();\n//           DirectionsService.route({\n//             origin: new google.maps.LatLng(47.6769683,-122.0284808),\n//             destination: new google.maps.LatLng( 49.2827, -123.1207 ),\n//             travelMode: google.maps.TravelMode.DRIVING,\n//           }, (result, status) => {\n//             if (status === google.maps.DirectionsStatus.OK) {\n//                 console.log(result)\n// this.setState({\n//                 directions: {...result},\n//                 markers: true\n//               })\n//             } else {\n//               console.error(`error fetching directions ${result}`);\n//             }\n//           });\n//         }\n//       }),\n//     withState('places', 'updatePlaces','','searchCriteria','radius','currLat','currLng'),\n//     withStateHandlers(()=>({\n//         isOpen:false,\n//         markerIndex:0,\n//         currentLatLng:{\n//             lat:47.6769683,lng:-90.6769683\n//         }\n//     }),{\n//         onToggleOpen:({isOpen})=>(index)=>({\n//             isOpen:!isOpen,\n//             markerIndex:index\n//         })\n//     },\n//     ),\n//     withHandlers(() => {//props =>\n//         const refs = {\n//             map: undefined,\n//         }\n//         return {\n//             onMapMounted: () => ref => {\n//                 refs.map = ref\n//             },\n//             fetchPlaces: ({ updatePlaces, searchCriteria, radius ,price , review ,defaultCenter }) => {\n//                 const bounds = refs.map.getBounds();\n//                 //var typeSearchCriteria=searchCriteria;\n//                 var maxPrice=price\n//                 var searchRating=review\n//                 const service = new google.maps.places.PlacesService(refs.map.context.__SECRET_MAP_DO_NOT_USE_OR_YOU_WILL_BE_FIRED);\n//                 var request = {\n//                     location:defaultCenter,//location:(new google.maps.LatLng(47.6769683,-122.0284808)),or {lat:47.6769683,lng:-122.0284808}\n//                     bounds:bounds,\n//                     radius: radius,\n//                     type:searchCriteria,\n//                     openNow:true,\n//                     maxPriceLevel:maxPrice,\n//                     fields:['photos', 'formatted_address', 'name', 'rating', 'opening_hours', 'geometry']\n//                 };\n               \n//                 service.nearbySearch(request, (results, status) => {\n//                     if (status === google.maps.places.PlacesServiceStatus.OK) {\n//                         //console.log(results);\n//                         console.log(\"Radius inside withhandlers \"+radius);\n//                         console.log(\"Reviews inside withhandlers \"+review);\n//                         updatePlaces(results);\n                \n//                     }\n//                 })\n//             },\n//             currentLoc: ({currLat,currLng})=>{\n//                 if(navigator.geolocation){\n//                     navigator.geolocation.getCurrentPosition(\n//                         position=>{\n//                                currLat=position.coords.latitude\n//                                currLng=position.coords.longitude\n//                             })\n//                          console.log()\n//                         }\n                     \n//             }\n//         }\n//     }),\n// )((props) => {\n//   console.log(\"Radius \"+props.radius)\n\n//     var target=new google.maps.LatLng(47.6769683,-122.0284808);\n//     if(props.defaultCenter !== undefined){\n    \n//         target=props.defaultCenter\n//     }\n//     var option=[]; //new array to store results based on search criteria\n//     if(props.places){\n//         props.places.map((place,i)=>\n//             //console.log({ lat: place.geometry.location.lat(), lng: place.geometry.location.lng()})\n//             {if(google.maps.geometry.spherical.computeDistanceBetween(target,new google.maps.LatLng(place.geometry.location.lat(),place.geometry.location.lng()))<props.radius){\n//                 option.push(place);\n//             }\n//             if(place.price_level<=props.price){\n//                 console.log(\"price match\")\n//                 option.push(place)\n\n//             }\n\n//             if(place.types.length !== 0 && place.types.includes(props.searchCriteria)){\n//                 console.log(\"type match \"+props.searchCriteria)\n//                 option.push(place)\n\n//             }\n            \n//             if((place.rating)<=props.review){\n//                 console.log('rating match '+place.rating+\" : \"+props.review)\n//                 option.push(place)\n//             }\n\n\n//         }\n//         )\n//     }\n//     console.log(option);\n\n//     // if(navigator.geolocation){\n//     //     navigator.geolocation.getCurrentPosition(\n//     //         position=>{\n//     //                 props.currentLatLng.lat=position.coords.latitude\n//     //                 props.currentLatLng.lng=position.coords.longitude\n//     //             })\n             \n//     //         }\n//         //console.log(props.currLat);\n\n//         const pathCoordinates = [\n//             {lat:47.6769683,lng:-122.0284808},\n//             { lat: 49.2827, lng: -123.1207 }\n//         ];\n//     return (\n      \n//         <GoogleMap\n//             onTilesLoaded={props.fetchPlaces}\n//             ref={props.onMapMounted}\n//             onClick={props.fetchPlaces}\n//             defaultZoom={10}\n//                     defaultCenter={{lat:47.6769683,lng:-122.0284808}}\n//         >\n//             {option && option.map((place, i) =>                \n//                 <Marker key={i} position={{ lat: place.geometry.location.lat(), lng: place.geometry.location.lng() }} \n//                 onClick ={()=> {props.onToggleOpen(i)}} >\n//                 {props.isOpen && props.markerIndex=== i &&\n//                 <InfoWindow onCloseClick={props.onToggleOpen}>\n//                     <div>{place.name}</div>\n//                 </InfoWindow>\n//                 }\n//                 </Marker>\n                \n//             )}\n//                   {/*for creating path with the updated coordinates*/}\n//             {/* <Polyline\n//                 path={pathCoordinates}\n//                 geodesic={true}\n//                 options={{\n//                     strokeColor: \"#ff2527\",\n//                     strokeOpacity: 0.75,\n//                     strokeWeight: 2,\n//                     icons: [\n//                         {\n//                             offset: \"0\",\n//                             repeat: \"20px\"\n//                         }\n//                     ]\n//                 }}\n//             />\n//              {props.directions && <DirectionsRenderer directions={props.directions} suppressMarkers={props.markers}/>} */}\n\n//         </GoogleMap>\n     \n//     )\n   \n// })\n\n// export default class MealMap extends React.Component {\n\n    \n//     render() {\n\n//         var searchCriteria=this.props.search;\n//         var radius=this.props.radius;\n//         var price=this.props.price;\n//         var ratings=this.props.reviews;\n\n//         if(searchCriteria.length !== 0 || radius!== 0 || price !==0 || ratings!==0){\n//             console.log(searchCriteria+\" \"+ radius +\" \" +price+\" \"+ratings)\n//         searchCriteria.map(select=> {\n//             console.log(searchCriteria+\" \"+ radius +\" \" +price+\" \"+ratings)\n//             return(\n//               searchCriteria=select.label\n//             )\n//           })\n//           return (\n//             <MyMapComponent searchCriteria={searchCriteria} \n//                 price={price*1}\n//                 review={ratings}\n//                 radius={radius*1609} //converting into meters\n//             />\n//         )\n//           }\n//         // }else{\n//         //     console.log(searchCriteria+\" \"+ radius +\" \" +price+\" \"+ratings)\n//         return (\n//             <MyMapComponent searchCriteria='' \n//                 price=\"any\"\n//                 review=\"any\"\n//                 radius='0'\n//             />\n//         )\n//         // }\n\n      \n       \n//     }\n\n// }\n\n/*global google*/\nimport React from \"react\"\nimport { compose, withProps, withHandlers, withState,withStateHandlers } from \"recompose\"\nimport { withScriptjs, withGoogleMap, GoogleMap, Marker , InfoWindow } from \"react-google-maps\"\n\nvar h=[];\n\n\nconst MyMapComponent = compose(\n\n    withProps(\n        {\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyD8kEdQYnlfJaGYD70GNqtxzf7oet_3wwY&libraries=places,geometry\",\n        loadingElement: <div style={{ height: '100vh' }} />,\n        containerElement: <div style={{height: '100vh' }} />,\n        mapElement: <div style={{ position:\"relative\",\n        width: \"50%\",\n        height: 382,\n        WebkitFilter: \"drop-shadow(0px 0px 5px #666)\",\n        marginLeft:491,\n        marginTop:-520.9 }} />,\n    }),\n    withScriptjs,\n    withGoogleMap,\n    withState('places', 'updatePlaces','','searchCriteria','radius','currLat','currLng'),\n    withStateHandlers(()=>({\n        isOpen:false,\n        markerIndex:0,\n        currentLatLng:{\n            lat:47.6769683,lng:-90.6769683\n        }\n    }),{\n        onToggleOpen:({isOpen})=>(index)=>({\n            isOpen:!isOpen,\n            markerIndex:index\n        })\n    },\n    ),\n    withHandlers(() => {\n        const refs = {\n            map: undefined,\n            array:[]\n        }\n        return {\n            onMapMounted: () => ref => {\n                refs.map = ref\n            },\n            fetchPlaces: async ({ updatePlaces, searchCriteria, radius ,price , review ,defaultCenter }) => {\n                const bounds = refs.map.getBounds();\n                refs.array=searchCriteria\n                console.log(refs.array.length)\n                //var typeSearchCriteria=searchCriteria;\n                var maxPrice=price\n                var searchRating=review\n                const service = new google.maps.places.PlacesService(refs.map.context.__SECRET_MAP_DO_NOT_USE_OR_YOU_WILL_BE_FIRED);\n                var x;\n                var output=[];\n                for(x=0;x<refs.array.length;x++){\n                    //console.log(refs.array[x])\n                var request = {\n                    location:defaultCenter,//location:(new google.maps.LatLng(47.6769683,-122.0284808)),or {lat:47.6769683,lng:-122.0284808}\n                    bounds:bounds,\n                    radius: radius,\n                    type:refs.array[x],\n                    openNow:true,\n                    maxPriceLevel:maxPrice,\n                    fields:['photos', 'formatted_address', 'name', 'rating', 'opening_hours', 'geometry']\n                };\n                let shal=\"@ @ # $ \";\n                \n                console.log(\"we are printing this \"+this);\n                await service.nearbySearch(request, (results, status) => {\n                \n                    return new Promise((reject, resolve)=>{\n                        if (status === google.maps.places.PlacesServiceStatus.OK) {\n                            var x;\n                            for(x=0;x<results.length;x++)\n                           output.push(results[x]);\n                           resolve(output);\n                            //that.setState({output})\n                            console.log(output);\n                            // console.log(\"Radius inside withhandlers \"+radius);\n                            // console.log(\"Reviews inside withhandlers \"+review);\n                            //updatePlaces(results);    \n                        }else{\n                            reject();\n                        }\n                    })\n                   \n                })\n            console.log(output)\n            }\n        \n            if(h.length>0){\n                \n                //console.log(\"HERE!!!!!!\"+ output.length);\n                var j;\n                for(j=0;j<h.length;j++)\n                console.log(h[j])\n                // updatePlaces(output);\n            }\n            updatePlaces(h);\n           // console.log(output);\n            \n            }\n            ,\n            \n            currentLoc: ({currLat,currLng})=>{\n                if(navigator.geolocation){\n                    navigator.geolocation.getCurrentPosition(\n                        position=>{\n                               currLat=position.coords.latitude\n                               currLng=position.coords.longitude\n                            })\n                         console.log()\n                        }\n                     \n            }\n        }\n    }),\n)((props) => {\n//console.log(\"Radius \"+ props.radius)\n\nif(props.places != null)\n//console.log(\"helloo\"+props.places)\n\n    var target=new google.maps.LatLng(47.6769683,-122.0284808);\n    if(props.defaultCenter !== undefined){\n        target=props.defaultCenter\n    }\n    var option=[]; //new array to store results based on search criteria\n    if(props.places){\n     console.log(\"here####\")\n        // props.places.map((place,i)=>\n        //     {\n        //     console.log({ lat: place.geometry.location.lat(), lng: place.geometry.location.lng()})\n            \n            \n        //     if(google.maps.geometry.spherical.computeDistanceBetween(target,new google.maps.LatLng(place.geometry.location.lat(),place.geometry.location.lng()))<props.radius){\n                \n        //         option.push(place);\n        //     }\n        //     if(place.price_level<=props.price){\n        //         option.push(place)\n\n        //     }\n        //     console.log('stuck here')\n        //     if(place.types.length !== 0 && place.types.includes(props.searchCriteria)){\n        //         console.log(\"here \"+props.searchCriteria)\n        //         option.push(place)\n\n        //     }\n\n\n        // }\n        // )\n    }\n    \n    // var places_index;\n    // for(places_index=0;places_index<props.places.length;places_index++){\n    //     var results=props.places[places_index]\n    //     console.log(results)\n    // }\n\n\n\n\n    console.log(option);\n\n    // if(navigator.geolocation){\n    //     navigator.geolocation.getCurrentPosition(\n    //         position=>{\n    //                 props.currentLatLng.lat=position.coords.latitude\n    //                 props.currentLatLng.lng=position.coords.longitude\n    //             })\n             \n    //         }\n        //console.log(props.currLat);\n    return (\n      \n        <GoogleMap\n            onTilesLoaded={props.fetchPlaces}\n            ref={props.onMapMounted}\n            onClick={props.fetchPlaces}\n            defaultZoom={10}\n            defaultCenter={{lat:47.6769683,lng:-122.0284808}}\n        >\n            {option && option.map((place, i) =>                \n                <Marker key={i} position={{ lat: place.geometry.location.lat(), lng: place.geometry.location.lng() }} \n                onClick ={()=> {props.onToggleOpen(i)}} >\n                {props.isOpen && props.markerIndex=== i &&\n                <InfoWindow onCloseClick={props.onToggleOpen}>\n                    <div>{place.name}</div>\n                </InfoWindow>\n                }\n                </Marker>\n                \n            )}\n\n        </GoogleMap>\n     \n    )\n   \n})\n\nexport default class MealMap extends React.Component {\n\n    \n    render() {\n\n        var searchCriteria=this.props.search;\n        var radius=this.props.radius;\n        var price=this.props.price;\n        var ratings=this.props.reviews;\n        var types=[]\n  \n        if(searchCriteria.length !== 0 || radius!== 0 || price !==0){\n            console.log(searchCriteria+\" \"+ radius +\" \" +price+\" \"+ratings)\n        // searchCriteria.map(select=> {\n        //     console.log(searchCriteria+\" \"+ radius +\" \" +price+\" \"+ratings)\n        //     return(\n        //       searchCriteria=select.label\n        //     )\n        //   })\n\n        searchCriteria.map(select=>{\n            types.push(select.label)\n        })\n\n      return (\n            <MyMapComponent searchCriteria={types}\n                price={price*1}\n                review={ratings}\n                radius={radius*1609} //converting into meters\n            />\n        )\n          }\n        // }else{\n        //     console.log(searchCriteria+\" \"+ radius +\" \" +price+\" \"+ratings)\n        return ( //to prevent from crashing\n            <MyMapComponent searchCriteria='' \n                price=\"any\"\n                review=\"any\"\n                radius='0'\n            />\n        )\n        // }\n       \n    }\n\n}"]},"metadata":{},"sourceType":"module"}